/*
	uxmhf main uobj json manifest
	author: matt mccormack (matthew.mccormack@live.com)
*/

{

   	/* manifest header */
	"uberspark-manifest":{
		"manifest_node_types" : [ "uberspark-uobj" ],
		"uberspark_min_version" : "6.0.0",
		"uberspark_max_version" : "any"
	},


  	/* uobj declaration */
	"uberspark-uobj" : {
		"namespace" : "uberspark/uobjcoll/platform/rpi3/uxmhf/main",
		"platform" : "rpi3",
		"arch" : "armv8_32",
		"cpu" : "generic",

		/* sources */
		"sources" : {
		    "h-files": [ 
				"include/arm8-32.h", 
				"include/atags.h",
				"include/bcm2837.h", 
				"include/config.h",
				"include/ctxtrace.h", 
				"include/debug.h",
				"include/dmaprot.h", 
				"include/fdt.h",
				"include/guestos.h", 
				"include/libutpm/utpm.h",
				"include/mailbox.h",
				"include/miniuart.h", 
				"include/pa5encfs.h",
				"include/pl011uart.h", 
				"include/types.h",
				"include/uagent.h",
				"include/uapp-pvdriver-uart.h",
				"include/uart.h", 
				"include/uhcalltest.h",
				"include/uhsign.h",
				"include/uhstateDB.h",
				"include/utpmtest.h",
				"include/watchdog.h",
				"include/whitelist.h"
			],

		    "c-files": [ 
				"common/atags.c",
				"common/debug.c", 
				"common/mailbox.c",
				"common/miniuart.c",
				"common/pl011uart.c", 
				"common/subr_prf.c",
				"common/whitelist.c",
				
				"core/bcm2837.c",
				"core/dmaprot.c",
				"core/ghcall.c",
				"core/hyppgtbl.c",
				"core/hyptimer.c", 
				"core/hypvtable.c", 
				"core/intprot.c", 
				"core/main.c", 
				"core/mmu.c",
				"core/s2pgtbl.c",
				"core/secboot.c",
				"core/uapi_s2pgtbl.c", 
				
				"libutpm/utpm-common.c", 
				"libutpm/utpm.c",
			
				"uapps/uapp-ctxtrace.c",
				"uapps/uapp-pa5encfs.c",
				"uapps/uapp-pvdriver-uart.c",
				"uapps/uapp-uagent.c",
				"uapps/uapp-uhcalltest.c",
				//"uapps/uapp-uhsign.c",
				"uapps/uapp-uhstateDB.c",
				"uapps/uapp-utpmtest.c",
				"uapps/uapp-watchdog.c"

			],
			
			"casm-files": [ ],
			
			"asm-files": [ 
				"common/arm8-32.s", 

				"core/entry.S",
				"core/hypvtablestubs.s",

				"uapps/uapp-watchdogsup.s"
				
				  ]
		},
	
		/* public methods */
		"publicmethods" : {
			"entry" : [
				"void",
				"(uint32_t r0, uint32_t id, struct atag *at)", 
				"3"
			]
		},

		/* public methods of other uobjs that this uobj invokes 
			within the same collection
		*/
		"intrauobjcoll-callees" : {
		},
	

		/* public methods of other uobjs that this uobj invokes 
			across other collection(s)
		*/
		"interuobjcoll-callees": {
		},
	
		/* legacy CoSS functions/code that this uobj invokes */
		"legacy-callees": [
		],

		/* uobjrtl */
		"uobjrtl": [
			{
				"namespace" : "uberspark/uobjrtl/crt"
			},

			{
				"namespace" : "uberspark/uobjrtl/crypto"
			}
		],

		/* sections */
		"sections": [
			{
				"name" : "uobj_code",
				"size" : "0x400000"
			},

			{
				"name" : "paligndata",
				"output_names" : [ ".paligndata" ],
				"type" : "0x0",
				"prot" : "0x0",
				"size" : "0x800000",
				"aligned_at" : "0x1000",
				"pad_to" : "0x1000"
			},

			{
				"name" : "palign2mdata",
				"output_names" : [ ".palign2mdata" ],
				"type" : "0x0",
				"prot" : "0x0",
				"size" : "0x400000",
				"aligned_at" : "0x200000",
				"pad_to" : "0x1000"
			}

		]
		
	}

}
